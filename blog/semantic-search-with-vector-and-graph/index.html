<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Graph DB에 Vector 를 통합하여 Semantic Search 구현하기 | Intellectus Data Fabric</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://experimenting-to-learn.github.io/publication/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://experimenting-to-learn.github.io/publication/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://experimenting-to-learn.github.io/publication/blog/semantic-search-with-vector-and-graph"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Graph DB에 Vector 를 통합하여 Semantic Search 구현하기 | Intellectus Data Fabric"><meta data-rh="true" name="description" content="이 글에서는 텍스트(자연어) 데이터의 색인(Index) 방식과 활용 방법에 대해서 기술적으로 설명한다. LLM 모델 자체에 대한 기술적인 설명이나, 자연어 처리(NLP)에 대해 구현(implementation) 관점의 상세한 설명은 핵심 주제가 아니다."><meta data-rh="true" property="og:description" content="이 글에서는 텍스트(자연어) 데이터의 색인(Index) 방식과 활용 방법에 대해서 기술적으로 설명한다. LLM 모델 자체에 대한 기술적인 설명이나, 자연어 처리(NLP)에 대해 구현(implementation) 관점의 상세한 설명은 핵심 주제가 아니다."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-12-11T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://www.linkedin.com/in/%EB%B3%B4%EA%B2%BD-%EC%B0%A8-793a641a8/"><meta data-rh="true" property="article:tag" content="semantic-search"><link data-rh="true" rel="icon" href="/publication/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://experimenting-to-learn.github.io/publication/blog/semantic-search-with-vector-and-graph"><link data-rh="true" rel="alternate" href="https://experimenting-to-learn.github.io/publication/blog/semantic-search-with-vector-and-graph" hreflang="en"><link data-rh="true" rel="alternate" href="https://experimenting-to-learn.github.io/publication/blog/semantic-search-with-vector-and-graph" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/publication/blog/rss.xml" title="Intellectus Data Fabric RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/publication/blog/atom.xml" title="Intellectus Data Fabric Atom Feed"><link rel="stylesheet" href="/publication/assets/css/styles.44bc74bb.css">
<script src="/publication/assets/js/runtime~main.afb44f67.js" defer="defer"></script>
<script src="/publication/assets/js/main.fe88fc5f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/publication/"><div class="navbar__logo"><img src="https://cdn.imweb.me/thumbnail/20230428/9591963aea4f7.png" alt="Intellectus Data Fabric Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="https://cdn.imweb.me/thumbnail/20230428/9591963aea4f7.png" alt="Intellectus Data Fabric Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Intellectus Data Fabric</b></a><a class="navbar__item navbar__link" href="/publication/docs/knowledge-to-act/intro">API to act</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/publication/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/experimenting-to-learn/publication" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/publication/blog/semantic-search-with-vector-and-graph">Graph DB에 Vector 를 통합하여 Semantic Search 구현하기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/publication/blog/iam-role-anywhere">AWS에서 Roles Anywhere로 credential 관리 대체하기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/publication/blog/dev-with-serverless">Serverless</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/publication/blog/codecatalyst-with-lambda">CodeCatalyst로 개발환경 구축하기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/publication/blog/txt-index-with-vector-embeddings">텍스트(자연어) 데이터 인덱스 방식과 활용</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="이 글에서는 텍스트(자연어) 데이터의 색인(Index) 방식과 활용 방법에 대해서 기술적으로 설명한다. LLM 모델 자체에 대한 기술적인 설명이나, 자연어 처리(NLP)에 대해 구현(implementation) 관점의 상세한 설명은 핵심 주제가 아니다."><header><h1 class="title_f1Hy" itemprop="headline">Graph DB에 Vector 를 통합하여 Semantic Search 구현하기</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-12-11T00:00:00.000Z" itemprop="datePublished">December 11, 2023</time> · <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://www.linkedin.com/in/%EB%B3%B4%EA%B2%BD-%EC%B0%A8-793a641a8/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://media.licdn.com/dms/image/D5603AQEIyPu7ittZhg/profile-displayphoto-shrink_800_800/0/1699874754841?e=1708560000&amp;v=beta&amp;t=_Y-ZSxsHmRCY6xKA74q64TK3TGKYMCZR5djqtywgNw0" alt="bogyung" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://www.linkedin.com/in/%EB%B3%B4%EA%B2%BD-%EC%B0%A8-793a641a8/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">bogyung</span></a></div><small class="avatar__subtitle" itemprop="description">Data Engineer @ Intellectus</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><blockquote>
<p>이 글에서는 텍스트(자연어) 데이터의 색인(Index) 방식과 활용 방법에 대해서 기술적으로 설명한다. LLM 모델 자체에 대한 기술적인 설명이나, 자연어 처리(NLP)에 대해 구현(implementation) 관점의 상세한 설명은 핵심 주제가 아니다.
텍스트 임베딩을 이용한 검색 시스템의 전반적인 설명은 <a href="/publication/blog/blog/txt-index-with-vector-embeddings">이전 포스팅</a>에서 다루었다.
임베딩을 이용한 벡터 유사도(Vector Similarity) 기반 시맨틱 검색을 이해 하거나, Graph DB를 적용한 검색 기능 고도화에 관심이 있는 소프트웨어 엔지니어에게 도움이 될 것이다.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="semantic-vs-synthetic">Semantic vs. Synthetic<a href="#semantic-vs-synthetic" class="hash-link" aria-label="Direct link to Semantic vs. Synthetic" title="Direct link to Semantic vs. Synthetic">​</a></h2>
<p>사용자가 자연어를 이용해 필요한 정보를 찾기 위한 기술 중 비교해볼 수 있는 것으로 아래와 같은 두 방식이 있다.</p>
<ol>
<li>직접적인 키워드 매칭 을 이용한 Synthetic Search(Keyword Search)</li>
<li>벡터 유사도 측정(Vector Similarity)을 이용한 Semantic Search</li>
</ol>
<p>Synthetic Search의 대표적인 예로 n-gram을 기반으로 Full-text search를 지원하는 방식이 있는데, 이는 전문을 일정 단위(n)로 쪼개어 각각의 부분들을 인덱스로 활용하여 검색 정확도를 올리는 방법이다. 웹 브라우저나 일부 프로그램에서 사용하는 Ctrl + f(찾기)기능이 바로 대표적이다. 이는 입력된 검색어의 일치를 검사하기 때문에 높은 정확도의 장점이 있지만, 반대로 그렇기 때문에 검색어 내의 오타 발생이나 잘못된 띄어쓰기 같은 문법적 차이로 기대하는 검색 결과를 얻지 못할 수도 있다. 또한 인덱스 단위 데이터가 별도로 저장되고 정렬되기 때문에 인덱스 데이터베이스의 용량과 변경에 따른 재 정렬 과정에서 부하가 발생하는 단점이 있다.</p>
<p>또한, 데이터의 의미론적 연관성을 반영할 수 없기 때문에 비슷한 의미를 가진 데이터를 찾는 데 어려움이 있을 수 있습니다. 이런 한계를 극복하고 보완하는 방법으로 Vector Similarity를 활용하는 것이 Semantic Search 의 여러 방식 중 하나가 있다.
Semantic Search는 자연어의 의미론적 요소를 반영하기 때문에 사용자 입장에서 더 풍부한 검색 결과를 제공받을 수 있다. 임베일 기술을 이용해서 단어를 벡터화로 표현하면 유사성을 계산할 수 있으므로 이러한 검색 방식을 구현하는 것이 가능하다. 사용자가 입력한 검색어와 관련된 정보를 더욱 효과적으로 찾을 수 있다.</p>
<p>먼저 단어를 컴퓨터가 처리할 수 있도록 다차원의 벡터로 변경시키는 Text Embedding이 필요하다.  임베딩 방법이나 벡터 유사도에 대한 설명은 이전 <a href="/publication/blog/blog/txt-index-with-vector-embeddings">포스트를</a> 참고하면 된다.</p>
<p>텍스트 임베딩은 (일반적으로) 많은 데이터를 사용하여 모델을 학습시킬 수록 성능이 향상되며, 여러 파라미터/임베딩 차원 등을 조정해야 한다. 직접 임베딩 모델을 구축하고 충분한 양의 데이터를 학습 시키고, 충분한 하드웨어 자원을 이용해서 동작 시키는 일은 기술적 난이도나 비용 면에서 쉬운 일이 아니다. 최근에는 LLM 기반의 서비스들이 제공하는 임베딩 API가 좋은 대안이 될 수 있다. 상용 수준의 서비스를 제공하는 만큼 결과 면에서도 높은 품질을 제공하며, 모델 생성을 위한 학습과 추론에 필요한 하드웨어 자원을 공유하는 모델이기 때문에 사용량 만큼의 합리적인 비용을 기대할 수 있다. OpenAI에서 제공하는 Embedding API도 그 중 하나 이다. API 사용량에 따라 일정 비용(23년 6월 기준 0.0001$/1K token)이 발생한다. 무엇보다 NLP 서비스를 개발하는 초기 단계에서 합리적인 비용과 성능으로 사용할 수 있다. 모델 생성의 자세한 내용은 비공개 이지만, 경우에 따라서는 영어 외 언어에 대해서도 유의미한 결과를 얻을 수 있다는 것은 장점 중 하나 이다.</p>
<p>하기는 데모 애플리케이션의 동작 모습으로 이모지(Emoji) 데이터를 GloVe 방식으로 twitter 에서 생성된 corpus 를 직접 훈련시켜 개발 환경에서 직접 동작시킨 모델과 OpenAI 의 임베딩 API를 사용하여 각각 입력 검색어에 대해 관련성이 있는 결과를 표시한 것이다.</p>
<p><img loading="lazy" alt="demo-screenshot-01" src="/publication/assets/images/demo-screenshot-01-291afc3fd1c73333fe03373895c23080.png" width="1502" height="811" class="img_ev3q"><em>demo screenshot</em>
<img loading="lazy" alt="demo-screenshot-02" src="/publication/assets/images/demo-screenshot-02-3569b9e75c5099e657d1bdb33b4fc4da.png" width="1367" height="768" class="img_ev3q"><em>demo screenshot</em>
<img loading="lazy" alt="demo-screenshot-03" src="/publication/assets/images/demo-screenshot-03-7a553ddadc93b151882347ec5e7d1881.png" width="1556" height="766" class="img_ev3q"><em>demo screenshot</em></p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/publication/blog/tags/semantic-search">semantic-search</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2023-12-11-semactic_search_with_vector_and_graph/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/publication/blog/iam-role-anywhere"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">AWS에서 Roles Anywhere로 credential 관리 대체하기</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#semantic-vs-synthetic" class="table-of-contents__link toc-highlight">Semantic vs. Synthetic</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/publication/docs/knowledge-to-act/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/publication/blog">Blog</a></li><li class="footer__item"><a href="https://experimenting-to-learn.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Intellectus. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>